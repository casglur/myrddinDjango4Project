<div class="right-poem-container">
	<br>
	<iframe src="https://viewer.library.wales/dist/uv.html#?manifest=https://damsssl.llgc.org.uk/iiif/2.0/4400778/manifest.json&c=0&m=0&cv=27&config=../config/standalone.json&locales=en-GB:English%20(GB),cy-GB:Cymraeg,fr-FR:Fran%C3%A7ais%20(FR),pl-PL:Polski,sv-SE:Svenska&xywh=363,2529,2261,1898&r=0" width="560" height="420" allowfullscreen frameborder="0"></iframe>

	<div class="versions">
		<div class="form-group">
			<label for="version-select">Versions and Supplementary Material</label>
			<select class="form-select" aria-label="poem-versions" id="version-select" name="version-select">

			</select>	
		</div>	
		<!-- <pb-page endpoint="" emit="myrddin" class="embedded">
			<pb-document id="myrddin" path="myrddin_{{ myrddin_id }}.xml" odd="myrddin">
				<h3>Please wait - content loading...</h3>
			</pb-document>
			<pb-progress></pb-progress>
			<pb-view src="myrddin" xpath="/TEI/text/body/div/div/head" emit="myrddin" subscribe="myrddin" disable-history="true" >
			{% if keyword %}
			<pb-param name="query" value="{{ keyword }}" />
			{% endif %}
			</pb-view>	    
			</pb-view>
		</pb-page> -->
	</div>
	<ul class="nav nav-tabs" id="poem-tabs" role="tablist">
		<li class="nav-item" role="presentation">
			<button class="nav-link  active" id="cefndir-tab" data-toggle="tab" data-target="#cefndir" type="button" role="tab" aria-controls="cefndir" aria-selected="true">Cefndir</button>
		</li>								
		<li class="nav-item" role="presentation">
		<button class="nav-link" id="aralleiriad-tab" data-toggle="tab" data-target="#aralleiriad" type="button" role="tab" aria-controls="aralleiriad" aria-selected="false">Aralleiriad</button>
		</li>
		<li class="nav-item" role="presentation">
		<button class="nav-link" id="translation-tab" data-toggle="tab" data-target="#translation" type="button" role="tab" aria-controls="translation" aria-selected="false">Translation</button>
		</li>
		<li class="nav-item" role="presentation">
			<button class="nav-link" id="esboniadol-tab" data-toggle="tab" data-target="#esboniadol" type="button" role="tab" aria-controls="esboniadol" aria-selected="false">Esboniadol</button>
		</li>
		<li class="nav-item" role="presentation">
			<button class="nav-link" id="llawysgrifau-tab" data-toggle="tab" data-target="#llawysgrifau" type="button" role="tab" aria-controls="llawysgrifau" aria-selected="false">Llawysgrifau</button>
		</li>
		<li class="nav-item" role="presentation">
			<button class="nav-link" id="modern-tab" data-toggle="tab" data-target="#modern" type="button" role="tab" aria-controls="modern" aria-selected="false">Modern</button>
		</li>																							
	</ul>
	<div class="tab-content" id="poem-tabs">								
		<div class="tab-pane fade" id="aralleiriad" role="tabpanel" aria-labelledby="aralleiriad-tab">
			<div class="tab-pane fade show active" id="mod" role="tabpanel" aria-labelledby="mod-tab">
				<div class="poems-container">
					<pb-page endpoint="" emit="myrddin" class="embedded">
						<pb-document id="myrddin" path="myrddin_{{ myrddin_id }}.xml" odd="myrddin">
							<h3>Please wait - content loading...</h3>
						</pb-document>
						<pb-progress></pb-progress>
						<pb-view src="myrddin" xpath="/TEI/text/body/div/div/div[@xml:id='myrddin_{{ myrddin_id }}_aralleiriad']" emit="myrddin" subscribe="myrddin" disable-history="true" >
						{% if keyword %}
						<pb-param name="query" value="{{ keyword }}" />
						{% endif %}
						</pb-view>	    
						</pb-view>
					</pb-page>
				</div>
			</div>
		</div>
		<div class="tab-pane fade" id="translation" role="tabpanel" aria-labelledby="translation-tab">
			<div class="poems-container">
				<pb-page endpoint="" emit="myrddin" class="embedded">
					<pb-document id="myrddin" path="myrddin_{{ myrddin_id }}.xml" odd="myrddin">
						<h3>Please wait - content loading...</h3>
					</pb-document>
					<pb-progress></pb-progress>
					<pb-view src="myrddin" xpath="/TEI/text/body/div/div/div[@xml:id='myrddin_{{ myrddin_id }}_translation']" emit="myrddin" subscribe="myrddin" disable-history="true" >
					{% if keyword %}
					<pb-param name="query" value="{{ keyword }}" />
					{% endif %}
					</pb-view>	    
					</pb-view>
				</pb-page>
			</div>
		</div>
		<div class="tab-pane fade show active" id="cefndir" role="tabpanel" aria-labelledby="cefndir-tab">
			<div class="poems-container">
				<pb-page endpoint="" emit="myrddin" class="embedded">
					<pb-document id="myrddin" path="myrddin{{ myrddin_id }}.xml" odd="myrddin">
						<h3>Please wait - content loading...</h3>
					</pb-document>
					<pb-progress></pb-progress>
					<pb-view src="myrddin" xpath="/TEI/text/body/div/div/div[@xml:id='myrddin_{{ myrddin_id }}_cefndir']/note" emit="myrddin" subscribe="myrddin" disable-history="true" >
					{% if keyword %}
					<pb-param name="query" value="{{ keyword }}" />
					{% endif %}
					</pb-view>	    
					</pb-view>
				</pb-page>
			</div>
		</div>
		<div class="tab-pane fade" id="esboniadol" role="tabpanel" aria-labelledby="esboniadol-tab">
			<div class="poems-container">
				<pb-page endpoint="" emit="myrddin" class="embedded">
					<pb-document id="myrddin" path="myrddin_{{ myrddin_id }}.xml" odd="myrddin">
						<h3>Please wait - content loading...</h3>
					</pb-document>
					<pb-progress></pb-progress>
					<pb-view src="myrddin" xpath="/TEI/text/body/div/div/div[@xml:id='myrddin_{{ myrddin_id }}_esboniadol']/note" emit="myrddin" subscribe="myrddin" disable-history="true" >
					{% if keyword %}
					<pb-param name="query" value="{{ keyword }}" />
					{% endif %}
					</pb-view>	    
					</pb-view>
				</pb-page>
			</div>
		</div>
		<div class="tab-pane fade" id="llawysgrifau" role="tabpanel" aria-labelledby="llawysgrifau-tab">
			<div class="poems-container">
				<pb-page endpoint="" emit="myrddin" class="embedded">
					<pb-document id="myrddin" path="myrddin_{{ myrddin_id }}.xml" odd="myrddin">
						<h3>Please wait - content loading...</h3>
					</pb-document>
					<pb-progress></pb-progress>
					<pb-view src="myrddin" xpath="/TEI/text/body/div/div/div[@type='llawysgrifau']" emit="myrddin" subscribe="myrddin" disable-history="true" >
					{% if keyword %}
					<pb-param name="query" value="{{ keyword }}" />
					{% endif %}
					</pb-view>	    
					</pb-view>
				</pb-page>
			</div>
		</div>
		<div class="tab-pane fade" id="modern" role="tabpanel" aria-labelledby="modern-tab">
			<div class="poems-container">
				<pb-page endpoint="" emit="myrddin" class="embedded">
					<pb-document id="myrddin" path="myrddin_{{ myrddin_id }}.xml" odd="myrddin">
						<h3>Please wait - content loading...</h3>
					</pb-document>
					<pb-progress></pb-progress>
					<pb-view src="myrddin" xpath="/TEI/text/body/div/div/div[@xml:id='myrddin_{{ myrddin_id }}_testun_mod']" emit="myrddin" subscribe="myrddin" disable-history="true" >
					{% if keyword %}
					<pb-param name="query" value="{{ keyword }}" />
					{% endif %}
					</pb-view>	    
					</pb-view>
				</pb-page>
			</div>
		</div>
	  </div>	
</div>
<script language="JavaScript">

	// docUrl = "https://dh-existdb.swansea.ac.uk/exist/apps/emco/data?_query=declare%20namespace%20tei=%22http://www.tei-c.org/ns/1.0%22;doc(%27/db/apps/emco/data/EMCO_{{ emco_id }}.xml%27)//tei:graphic[@rend=%22facstab%22]"
	docUrl = "https://dh-existdb.swansea.ac.uk/exist/apps/myrddin/data?_query=declare%20namespace%20tei=%22http://www.tei-c.org/ns/1.0%22;declare%20variable%20$results%20:=%20doc(%27/db/apps/myrddin/data/myrddin_005.xml%27)//tei:div[@type=%22lev0%22];%3Csections%3E{for%20$result%20in%20$results%20return%20%3Csection%3E{$result/@xml:id/string()}%3C/section%3E}%3C/sections%3E"

	const xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange = function() {
	   if (this.readyState == 4 && this.status == 200) {
			makeTopSections(this);
	   }
	};
	xhttp.open("GET", docUrl, true);
	xhttp.send();

	function makeTopSections(xml) {
		var sections = [];
		
		xmlDoc = xml.responseXML;
	
		section = xmlDoc.querySelectorAll('section')
		for (i = 0; i < section.length; i++) {
			console.log('section names: ' + section[i].textContent);
			sections.push(section[i].textContent)
		}
	
		console.log(sections);
	
		console.log("stringified output: " + JSON.stringify(sections, null, 4))
		
		$.each(sections, function(i, p) {
			$('#version-select').append($('<option></option>').val(p).html(p));
		});		
		
		
	}	

</script>